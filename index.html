<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Toddler Interactive Screen</title>
    <!-- Tailwind CSS CDN for easy styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Tone.js CDN for sound generation -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.8.49/Tone.min.js"></script>
    <style>
        /* Custom styles for the app */
        body {
            font-family: 'Inter', sans-serif;
            overflow: hidden; /* Prevent scrolling */
            cursor: none; /* Hide default cursor when locked */
        }

        /* The main overlay that locks the screen */
        #lock-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: radial-gradient(circle at center, #1a1a1a, #000000); /* Initial subtle gradient */
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            z-index: 9999; /* Ensure it's on top of everything */
            transition: background 0.5s ease-in-out; /* Smooth background transitions for gradients */
            cursor: none; /* Hide cursor when locked */
        }

        /* Styles for the dynamically generated visual elements */
        .visual-element {
            position: absolute;
            opacity: 0;
            transform: scale(0.1) rotate(0deg); /* Initial state with rotation */
            transition: all 0.3s cubic-bezier(0.68, -0.55, 0.27, 1.55); /* Bouncy transition */
            pointer-events: none; /* Ensure these elements don't block events */
            user-select: none; /* Prevent text selection */
            font-weight: bold;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
            will-change: transform, opacity; /* Optimize for animation */
        }

        /* Class to make the visual element appear */
        .visual-element.show {
            opacity: 1;
            transform: scale(1) rotate(var(--random-rotation, 0deg)); /* Use custom property for random rotation */
        }

        /* Class to fade out and remove the visual element */
        .visual-element.hide {
            opacity: 0;
            transform: scale(1.5) rotate(var(--random-rotation, 0deg)); /* Slightly grow as it fades */
        }

        /* Ensure the unlock instructions are visible but discreet */
        #unlock-instructions {
            position: fixed;
            bottom: 10px;
            left: 50%;
            transform: translateX(-50%);
            color: rgba(255, 255, 255, 0.5);
            font-size: 0.8rem;
            text-align: center;
            z-index: 10000;
            user-select: none;
            pointer-events: none;
        }

        /* Hide the default cursor when the screen is locked */
        body.locked {
            cursor: none;
        }

        /* Show default cursor when unlocked */
        body.unlocked {
            cursor: default;
        }
    </style>
</head>
<body class="locked">
    <!-- The main overlay that covers the entire screen when locked -->
    <div id="lock-overlay" class="rounded-lg">
        <h1 class="text-white text-5xl md:text-7xl font-extrabold mb-8 text-center animate-pulse">
            Ready to Play!
        </h1>
        <p class="text-white text-xl md:text-2xl text-center">
            Start typing or moving the mouse!
        </p>
        <!-- This area will be dynamically populated with visual feedback -->
        <div id="visual-feedback-area"></div>
    </div>

    <!-- Instructions for unlocking the screen -->
    <div id="unlock-instructions" class="rounded-md p-1 bg-gray-800 bg-opacity-50">
        Press <span class="font-bold">Ctrl + Shift + L</span> to unlock
    </div>

    <script>
        // Get references to the main elements
        const lockOverlay = document.getElementById('lock-overlay');
        const visualFeedbackArea = document.getElementById('visual-feedback-area');
        const unlockInstructions = document.getElementById('unlock-instructions');
        const body = document.body;

        // State variable to track if the screen is locked
        let isLocked = true;

        // Initialize Tone.js Synth for sound feedback
        // Use a simple poly synth for multiple simultaneous notes
        const synth = new Tone.PolySynth(Tone.Synth, {
            oscillator: {
                type: "sine" // Simple sine wave for a soft sound
            },
            envelope: {
                attack: 0.01,
                decay: 0.1,
                sustain: 0.05,
                release: 0.3
            },
            volume: -20 // Lower the volume by 20 decibels
        }).toDestination();

        // Array of vibrant colors for visual feedback and background gradients
        const colors = [
            '#FF6B6B', '#FFD166', '#06D6A0', '#118AB2', '#073B4C',
            '#FF9F1C', '#2EC4B6', '#E71D36', '#F7B801', '#A9F0D1',
            '#C70039', '#FFC300', '#DAF7A6', '#FF5733', '#C70039',
            '#6A0572', '#AB83A1', '#8E292E', '#D14081', '#F08A5D'
        ];

        // Array of characters/emojis for visual feedback, expanded for toddlers
        const characters = [
            'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M',
            'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z',
            '0', '1', '2', '3', '4', '5', '6', '7', '8', '9',
            '⭐', '🌈', '🎉', '🎈', '✨', '🚀', '💖', '💡', '🎵', '🐾', '🍄', '🍎', '🍊', '🍋', '🍉', '🍇', '🍓',
            '🚗', '🚂', '🚁', '🚲', '🧸', '⚽', '🎨', '🧩', '👑', '🐸', '🐢', '🐥', '🐠', '🦋', '🌸', '🌳', '☀️', '🌙', '☁️'
        ];

        // Array of musical notes for sound feedback
        const notes = ['C4', 'D4', 'E4', 'G4', 'A4', 'C5', 'D5', 'E5'];

        // Function to get a random element from an array
        function getRandomElement(arr) {
            return arr[Math.floor(Math.random() * arr.length)];
        }

        // Function to generate and display visual feedback
        function generateVisualFeedback(x, y, type, content = '') {
            if (!isLocked) return; // Only generate feedback when locked

            const visualElement = document.createElement('div');
            visualElement.classList.add('visual-element');
            visualElement.style.left = `${x}px`;
            visualElement.style.top = `${y}px`;
            visualElement.style.color = getRandomElement(colors);
            visualElement.style.fontSize = `${Math.random() * 60 + 40}px`; // Larger random font size
            const randomRotation = Math.random() * 360 - 180; // -180 to 180 degrees
            visualElement.style.setProperty('--random-rotation', `${randomRotation}deg`); // Set CSS variable for rotation

            if (type === 'key') {
                visualElement.textContent = content || getRandomElement(characters);
            } else if (type === 'mouse') {
                visualElement.textContent = getRandomElement(['✨', '💥', '🌈', '🌟', '💧', '💫', '💖', '💡']); // More abstract for mouse
                visualElement.style.fontSize = `${Math.random() * 70 + 50}px`; // Even larger for mouse
            }

            visualFeedbackArea.appendChild(visualElement);

            // Trigger the 'show' class to start the animation
            setTimeout(() => {
                visualElement.classList.add('show');
            }, 10); // Small delay to ensure CSS transition applies

            // Play a sound
            Tone.start(); // Ensure audio context is started
            synth.triggerAttackRelease(getRandomElement(notes), '8n'); // Play a random note for an 8th note duration

            // Remove the element after a short duration
            setTimeout(() => {
                visualElement.classList.remove('show');
                visualElement.classList.add('hide'); // Add hide class for fade out effect
                visualElement.addEventListener('transitionend', () => {
                    visualElement.remove(); // Remove from DOM after transition
                });
            }, 700); // Element stays visible for 0.7 seconds
        }

        // Function to change the background to a random radial gradient
        function changeBackgroundGradient() {
            if (!isLocked) return;
            const color1 = getRandomElement(colors);
            const color2 = getRandomElement(colors);
            lockOverlay.style.background = `radial-gradient(circle at center, ${color1}, ${color2})`;
        }

        // Event listener for keydown events
        function handleKeyDown(event) {
            if (isLocked) {
                event.preventDefault(); // Prevent default browser actions (e.g., tab switching, scrolling)

                // Check for unlock combination: Ctrl + Shift + L
                if (event.ctrlKey && event.shiftKey && event.key === 'L') {
                    unlockScreen();
                } else {
                    // Generate visual feedback for any other key press
                    const x = Math.random() * window.innerWidth;
                    const y = Math.random() * window.innerHeight;
                    generateVisualFeedback(x, y, 'key', event.key.toUpperCase());
                    changeBackgroundGradient(); // Change background on key press
                }
            }
        }

        // Event listener for mousemove events
        let lastMouseMoveTime = 0;
        const mouseMoveThrottle = 50; // Milliseconds to throttle mouse events
        function handleMouseMove(event) {
            if (isLocked) {
                event.preventDefault(); // Prevent default mouse actions
                const currentTime = Date.now();
                if (currentTime - lastMouseMoveTime > mouseMoveThrottle) {
                    generateVisualFeedback(event.clientX, event.clientY, 'mouse');
                    lastMouseMoveTime = currentTime;
                    // Change background color less frequently for mouse move
                    if (Math.random() < 0.05) { // 5% chance to change background
                        changeBackgroundGradient();
                    }
                }
            }
        }

        // Event listener for click events
        function handleClick(event) {
            if (isLocked) {
                event.preventDefault(); // Prevent default click actions
                // Generate visual feedback at click position
                generateVisualFeedback(event.clientX, event.clientY, 'mouse');
                changeBackgroundGradient(); // Change background on click
            }
        }

        // Function to lock the screen
        function lockScreen() {
            isLocked = true;
            lockOverlay.style.display = 'flex'; // Show the overlay
            unlockInstructions.style.display = 'block'; // Show instructions
            body.classList.remove('unlocked');
            body.classList.add('locked');
            // Attach event listeners when locked
            document.addEventListener('keydown', handleKeyDown);
            document.addEventListener('mousemove', handleMouseMove);
            document.addEventListener('click', handleClick);
        }

        // Function to unlock the screen
        function unlockScreen() {
            isLocked = false;
            lockOverlay.style.display = 'none'; // Hide the overlay
            unlockInstructions.style.display = 'none'; // Hide instructions
            body.classList.remove('locked');
            body.classList.add('unlocked');
            // Remove event listeners when unlocked
            document.removeEventListener('keydown', handleKeyDown);
            document.removeEventListener('mousemove', handleMouseMove);
            document.removeEventListener('click', handleClick);
        }

        // Initialize the screen as locked when the page loads
        window.onload = lockScreen;

    </script>
</body>
</html>
